(()=>{"use strict";var e,t={"8ruZ":(e,t,r)=>{var n=r("P4Tr"),o=r.n(n),i=r("m14p"),a=r("5HXA"),s=r("sINF"),l=r("R0vF"),c=(r("yq1k"),r("tkto"),r("pNMO"),r("TeQF"),r("07d7"),r("5DmW"),r("FZtP"),r("27RR"),r("JZM8")),u=r.n(c);function p(){return Date.now()}var d="db/files/Create",m="db/files/Delete",f="db/files/Import",g="db/files/Update",h="db/options/setOptionValue",y="ui/layout/app/setEditorMode",b="ui/layout/app/toggleLeftBar",v="ui/layout/app/toggleRightBar",O=function(e){return e.ui.layout.app.isLeftBarCollapsed},C=function(e){return e.ui.layout.app.isRightBarCollapsed},E=function(e){return e.ui.layout.app.editorMode},w=function(e){return e.fileManager.selected},P=function(e){return e.fileManager.renamed},R=function(e){return e.fileManager.defaultTitle},j=(r("ToJy"),r("zKZe"),r("3WF5")),F=r.n(j),S=r("BkRI"),N=r.n(S),q=r("Y+p1"),I=r.n(q),T=r("xweI"),k=r.n(T),x=r("G4qV"),A=r("EsgF");function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(0,x.wN)(A.PW,I())((function(e){return F()(e.db.files.allFiles,(function(e){return{title:e.title,id:e.id}}))}),(function(e){return k()(e,(function(e){return e.title.toLowerCase()}))})),D=function(e,t){return e.db.files.allFiles[t]},z=function(e,t,r){var n=e.db.files.allFiles[t];if(n&&(n.options||{})[r]){if(0===Object.keys(n.options[r]).length)return;return N()(n.options[r])}},W=function(e,t){var r=e.db.files.allFiles[t];if(r){var n=r.options||{},o=[];if(n.edit&&o.push(B({},n.edit)),n.play&&o.push(B({},n.play)),n.print&&o.push(B({},n.print)),n.export&&o.push(B({},n.export)),o.length)return o.sort((function(e,t){return e.updatedAt-t.updatedAt})),o.reduce((function(e,t){return Object.assign(e,t)}),{})}};const H={edit:[],play:["transposeValue","harmonizeAccidentals","preferredAccidentals","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","columnsCount","fontSize","chordsColor","highlightChords"],print:["transposeValue","harmonizeAccidentals","preferredAccidentals","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","columnsCount","columnBreakOnParagraph","documentMargins","fontSize","highlightChords"],export:["transposeValue","harmonizeAccidentals","preferredAccidentals","chartFormat","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords"]};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U={allFiles:{}};function $(e,t){var r=t.payload,n=r.id,o=r.title,i=r.content,a=V({},e.allFiles);return a[n]={id:n,title:o,content:i},V(V({},e),{},{allFiles:a})}function K(e,t){var r=t.payload,n=r.id,o=r.title,i=r.content;if(!o&&!i||!e.allFiles[n])return e;var a=V({},e.allFiles);return a[n]=V({},a[n]),o&&(a[n].title=o),i&&(a[n].content=i),V(V({},e),{},{allFiles:a})}function J(e,t){var r=t.payload.id;if(!r||!e.allFiles[r])return e;var n=V({},e.allFiles);return delete n[r],V(V({},e),{},{allFiles:n})}function Y(e,t,r){var n=t.payload,o=n.context,i=n.key,a=n.value,s=w(r),l=V({},e.allFiles);if(["songFormatting","songPreferences"].includes(o)&&l[s]){var c=E(r),u="songPreferences"===o?"preferences":c;return l[s]=function(e,t,r,n){return V(V({},e),{},{options:V(V({},e.options),{},Z({},t,V(V({},(e.options||{})[t]),{},Z({updatedAt:p()},r,n))))})}(l[s],u,i,a),V(V({},e),{},{allFiles:l})}return e}function X(e,t,r){var n=w(r),o=t.payload.mode;if(!!!z(r,n,o)){var i=u()(W(r,n)||{},H[o]);if(Object.keys(i).length){i.updatedAt=p();var a=V({},e.allFiles);return a[n]=V(V({},a[n]),{},{options:V(V({},a[n].options),{},Z({},o,i))}),V(V({},e),{},{allFiles:a})}}return e}r("4mDm"),r("3bBZ");var Q="fileManager/select",ee="fileManager/enableRename",te=function(e,t,r){if(e.db.options[t]&&e.db.options[t].values&&void 0!==e.db.options[t].values[r])return e.db.options[t].values[r]},re=function(e,t){if(e.db.options[t]&&e.db.options[t].defaults)return N()(e.db.options[t].defaults)};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae={};function se(e,t){var r=t.payload,n=r.context,o=r.key,i=r.value;if(!e[n]||!e[n].values||void 0===e[n].values[o])return e;var a=oe(oe({},e),{},ie({},n,oe(oe({},e[n]),{},{values:oe({},e[n].values)})));return a[n].values[o]=i,a}function le(e,t,r){var n=ce(r,w(r),t.payload.mode);return oe(oe({},e),{},{songFormatting:oe(oe({},e.songFormatting),{},{values:oe({},n)})})}function ce(e,t,r){var n=re(e,"songFormatting"),o=z(e,t,r);return o||(o=W(e,t)||{}),delete o.updatedAt,o=u()(o,H[r]),Object.assign(n,o)}function ue(e,t,r){var n=t.payload.id,o=ce(r,n,E(r)),i=z(r,n,"preferences")||{};delete i.updatedAt;var a=re(r,"songPreferences"),s=Object.assign(a,i);return oe(oe({},e),{},{songPreferences:oe(oe({},e.songPreferences),{},{values:oe({},s)}),songFormatting:oe(oe({},e.songFormatting),{},{values:oe({},o)})})}const pe=(0,l.Z)({files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.type){case d:case f:return $(e,t);case g:return K(e,t);case m:return J(e,t);case h:return Y(e,t,r);case y:return X(e,t,r)}return e},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.type){case h:return se(e,t);case y:return le(e,t,r);case Q:return ue(e,t,r)}return e}});function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge={selected:"",renamed:"",defaultTitle:"[untitled]"};var he="songImporter/import/cancel",ye="songImporter/import/start",be="songImporter/setContent",ve="songImporter/setInputFormat",Oe=r("wMS7"),Ce=r.n(Oe);function Ee(e){return Ce().sanitize(e,{ALLOWED_TAGS:["#text"],KEEP_CONTENT:!0})}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je={content:"",isFromWeb:!1,isImporting:!1,inputFormat:"basic",title:""};function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe={isLeftBarCollapsed:!1,isRightBarCollapsed:!1,editorMode:"edit",activeModal:"none"};const Ie=(0,l.Z)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Se(Se({},e),{},{isLeftBarCollapsed:!e.isLeftBarCollapsed});case v:return Se(Se({},e),{},{isRightBarCollapsed:!e.isRightBarCollapsed});case y:var r=t.payload.mode;return Se(Se({},e),{},{editorMode:r});case m:case d:case f:return Se(Se({},e),{},{editorMode:"edit"})}return e}}),Te=(0,l.Z)({layout:Ie}),ke=(0,l.Z)({db:pe,fileManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d:var r=t.payload.id;return me(me({},e),{},{selected:r,renamed:r});case f:var n=t.payload.id;return me(me({},e),{},{selected:n,renamed:""});case g:return me(me({},e),{},{renamed:""});case m:return me(me({},e),{},{selected:"",renamed:""});case Q:var o=t.payload.id;return me(me({},e),{},{selected:o,renamed:o===e.renamed?o:""});case ee:var i=t.payload.id;return me(me({},e),{},{renamed:i})}return e},songImporter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case be:var r=t.payload,n=r.content,o=r.title,i=void 0===o?"":o;return Pe(Pe({},e),{},{content:Ee(n),title:i?Ee(i):e.title});case ve:var a=t.payload.inputFormat;return Pe(Pe({},e),{},{inputFormat:a});case f:case he:return Pe(Pe({},e),{},{content:"",title:"",isImporting:!1});case ye:var s=t.payload,l=s.content,c=s.inputFormat,u=s.title,p=s.isFromWeb;return Pe(Pe({},e),{},{isImporting:!0,content:l?Ee(l):"",title:u?Ee(u):"",inputFormat:c||e.inputFormat,isFromWeb:p})}return e},ui:Te}),xe={db:{options:{songPreferences:{values:{transposeValue:0,harmonizeAccidentals:!0,preferredAccidentals:"auto"},defaults:{transposeValue:0,harmonizeAccidentals:!0,preferredAccidentals:"auto"}},songFormatting:{values:{chartFormat:"chordmark",chartType:"all",alignChordsWithLyrics:!0,alignBars:!0,autoRepeatChords:!0,columnsCount:1,columnBreakOnParagraph:!0,documentMargins:3,fontSize:0,chordsColor:"yellow",highlightChords:!1},defaults:{chartFormat:"chordmark",chartType:"all",alignChordsWithLyrics:!0,alignBars:!0,autoRepeatChords:!0,columnsCount:1,columnBreakOnParagraph:!0,documentMargins:3,fontSize:0,chordsColor:"yellow",highlightChords:!1}}}}};var Ae;function Me(){var e=(0,a.Uo)((0,i.md)(s.Z)),t=function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}(),r=o()(t,xe);(Ae=(0,i.MT)(ke,r,e)).subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){}}(Ae.getState())}))}function Be(){return Ae}function Le(e,t){if(!e)throw new TypeError("Cannot create an action without an action type");return{type:e,payload:t}}var _e={"@CCS/IMPORT_TAB":function(e){var t=Be(),r=De(e.title,e.artist);t.dispatch(function(e,t,r){return Le(ye,{content:t,inputFormat:e,title:r,isFromWeb:!0})}(e.source,e.chordChart,r))}},De=function(e,t){var r=e;return t&&(r+=" - "+t),r};function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var He=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},_e);if(e.source!==window||e.origin!==window.location.origin)return!1;var r=e.data;return"function"==typeof t[r.type]&&t[r.type](r.payload),!0},Ge=r("9Mdx"),Ve=r("q1tI"),Ze=r("i8i4"),Ue=r("rL7s"),$e=(r("JfAA"),r("NBAS"),r("SuFq"),r("4Brf"),r("0oug"),r("PKPk"),r("17x9")),Ke=r.n($e);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xe(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return et(this,r)}}function et(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(i,e);var t,r,n,o=Qe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={error:null,errorInfo:null},t}return t=i,(r=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Ve.createElement("div",{className:"ErrorBoundary"},Ve.createElement("h2",null,"Something went wrong"),Ve.createElement("details",{style:{whiteSpace:"pre-wrap"},open:!0},this.state.error&&this.state.error.toString(),Ve.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}])&&Ye(t.prototype,r),n&&Ye(t,n),i}(Ve.Component);rt.propTypes={children:Ke().any};const nt=rt;var ot=function(e){return Le(y,{mode:e})};r("oVuX");function it(e){var t=e.iconName;return Ve.createElement("i",{className:["icon","material-icons"].join(" ")},t)}it.propTypes={iconName:Ke().string.isRequired};const at=Ve.memo(it);function st(){return Ve.createElement("div",{className:"logo"},Ve.createElement("div",{className:"logo-isCollapsed"},Ve.createElement(at,{iconName:"queue_music"})),Ve.createElement("div",{className:"logo-isExpanded"},Ve.createElement("span",{className:"logo-icon"},Ve.createElement(at,{iconName:"queue_music"})),"Chords Charts Studio"))}const lt=Ve.memo(st);r("2B1R");function ct(e){var t=e.label,r=e.icon,n=e.editorMode,o=e.setEditorMode,i=e.isActive,a=e.isDisabled,s=["mainNavEntry"];return i&&s.push("mainNavEntry-isActive"),a&&s.push("mainNavEntry-isDisabled"),Ve.createElement("li",{className:s.join(" "),onClick:function(){a||o(n)}},Ve.createElement("span",{className:"mainNavEntry-icon"},Ve.createElement(at,{iconName:r})),t)}ct.propTypes={label:Ke().string.isRequired,icon:Ke().string.isRequired,editorMode:Ke().string.isRequired,setEditorMode:Ke().func.isRequired,isActive:Ke().bool.isRequired,isDisabled:Ke().bool.isRequired};const ut=Ve.memo(ct);function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pt.apply(this,arguments)}function dt(e){var t=e.currentMode,r=e.allEntries,n=e.setEditorMode,o=e.selectedId;return Ve.createElement("nav",{className:"mainNav"},Ve.createElement("ul",{className:"mainNav-entries"},r.map((function(e,r){return Ve.createElement(ut,pt({key:r,isActive:!!o&&e.editorMode===t,isDisabled:!o,setEditorMode:n},e))}))))}dt.propTypes={currentMode:Ke().string.isRequired,setEditorMode:Ke().func.isRequired,selectedId:Ke().string,allEntries:Ke().arrayOf(Ke().shape({id:Ke().string.isRequired,label:Ke().string.isRequired,icon:Ke().string.isRequired,editorMode:Ke().string.isRequired}))};const mt=Ve.memo(dt);function ft(){var e={"chord-charts-studio":"v0.8.3","chord-symbol":"v2.1.0","chord-mark":"v0.8.0-alpha.1"};return Ve.createElement("div",{className:"appFooter"},"Chords Charts Studio ",e["chord-charts-studio"],"- ChordMark"," ",e["chord-mark"],"- ChordSymbol ",e["chord-symbol"])}const gt=Ve.memo(ft);var ht=r("NiUT"),yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.title,n=t.content;if(!e)throw new TypeError("Cannot update a file without an id");var o={id:e,title:r,content:n};return Le(g,o)},bt=function(e){return e.songImporter.content},vt=function(e){return e.songImporter.inputFormat},Ot=function(e){return e.songImporter.title},Ct=function(e){return e.songImporter.isImporting},Et=function(e){return e.songImporter.isFromWeb};function wt(e){var t=e.children,r=e.closeModal;return(0,Ve.useEffect)((function(){var e=function(e){"Escape"===e.key&&r()};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}})),Ve.createElement("section",{className:"mod-ModalContainer"},Ve.createElement("div",{className:"mod-Overlay",onClick:r,"data-testid":"modal-overlay"}),Ve.createElement("div",{className:"mod-ContentContainer"},t))}wt.propTypes={children:Ke().element.isRequired,closeModal:Ke().func.isRequired};const Pt=wt;var Rt=function(e){var t=e.children,r=e.isDisabled,n=e.buttonName,o=e.onClick,i=e.type,a=["Button"];return"primary"===i&&a.push("Button-primary"),"secondary"===i&&a.push("Button-secondary"),r&&a.push("Button-isDisabled"),Ve.createElement("button",{className:a.join(" "),disabled:r,type:"button",name:n,onClick:o},t)};Rt.propTypes={children:Ke().string.isRequired,isDisabled:Ke().bool,buttonName:Ke().string.isRequired,type:Ke().string.isRequired,onClick:Ke().func.isRequired},Rt.defaultProps={isDisabled:!1};const jt=Rt;var Ft=function(e){var t=e.cancelImport,r=e.chordMarkContent,n=e.importFile,o=e.title,i=e.content,a=e.error,s=o?'Import "'+o+'"':"Import song";return Ve.createElement("div",{className:"sim-Header_Container"},Ve.createElement("div",{className:"sim-Header_Title"},s),Ve.createElement("div",{className:"sim-Header_Actions"},Ve.createElement(jt,{onClick:t,buttonName:"cancel",type:"secondary"},"CANCEL"),Ve.createElement(jt,{onClick:function(){n(o||"[untitled]",r)},buttonName:"import",type:"primary",isDisabled:""===i||""!==a},"IMPORT")))};Ft.propTypes={cancelImport:Ke().func.isRequired,chordMarkContent:Ke().string,content:Ke().string,error:Ke().string,importFile:Ke().func.isRequired,title:Ke().string};const St=Ft;r("5s+n"),r("sMBO");var Nt=r("zuWl"),qt=r.n(Nt),It=function(e){return e.name.substr(0,e.name.lastIndexOf("."))},Tt=function(e){return e.size>51200},kt=function(e){return 0===e.type.indexOf("text")||0===e.type.length},xt=function(e){return"The selected file is too big: "+qt()(e,{round:0})+" (maximum allowed file size is "+qt()(51200,{round:0})+")."},At=function(e){return"Cannot import file of type "+e.type+"."},Mt=function(){return"No file selected."};const Bt=function(e){return new Promise((function(t,r){if(e.length){var n=e[0];Tt(n)?r(xt(n.size)):kt(n)?n.text().then((function(e){t({content:e,title:It(n)})})).catch((function(e){r(e)})):r(At(n))}else r(Mt())}))};var Lt=function(e){var t=e.setContent;return Ve.createElement("div",null,Ve.createElement("label",{htmlFor:"importSong-Input",className:"Button Button-primary"},"Select File"),Ve.createElement("input",{id:"importSong-Input",name:"importSong-Input",type:"file",className:"sim-InputFile_Input",onChange:function(e){Bt(e.target.files).then((function(e){t(e.content,e.title)})).catch((function(e){t(e)}))},accept:"text/*,.cho,.crd,.chopro,.chord,.pro,.txt,.md"}))};Lt.propTypes={setContent:Ke().func.isRequired};const _t=Lt;function Dt(e){var t=e.content,r=e.setContent,n=e.isDisabled,o=["sim-Input_Textarea"];return n&&o.push("sim-Input_Textarea-Disabled"),Ve.createElement(Ve.Fragment,null,Ve.createElement("div",{className:"sim-Input_Header"},Ve.createElement(at,{iconName:"arrow_drop_down"}),"Edit directly below",Ve.createElement(at,{iconName:"arrow_drop_down"})),Ve.createElement("textarea",{className:o.join(" "),onChange:function(e){r(e.target.value)},value:t,disabled:n,"data-testid":"sim-input"}))}Dt.propTypes={content:Ke().string.isRequired,isDisabled:Ke().bool.isRequired,setContent:Ke().func.isRequired},Dt.defaultProps={};const zt=Dt;function Wt(e){var t=e.inputFormat,r=e.error;return Ve.createElement("div",{className:"sim-Preview_Error"},Ve.createElement("p",null,"There was an error when trying to parse the song in the specified input format (",t,").",Ve.createElement("br",null),"Please correct the input or try another format.",Ve.createElement("br",null),"The error was:"),Ve.createElement("p",null,'"',r,'"'),Ve.createElement("p",null,'Hint: most of the time, this is related to an unclosed "[" or "{" or an unsupported ChordPro directive'))}Wt.propTypes={error:Ke().string,inputFormat:Ke().string.isRequired},Wt.defaultProps={};const Ht=Wt;function Gt(e){var t=e.setInputFormat,r=e.inputFormat,n=e.id,o=e.label,i=e.isDisabled,a=["sim-InputFormat_Entry"],s=["sim-InputFormat_Label"];return i&&(a.push("sim-InputFormat_Entry-Disabled"),s.push("sim-InputFormat_Label-Disabled")),Ve.createElement(Ve.Fragment,null,Ve.createElement("input",{className:a.join(" "),type:"radio",name:"inputFormat",id:n,value:n,onChange:function(e){i||t(e.target.value)},checked:r===n}),Ve.createElement("label",{className:s.join(" "),htmlFor:n},o))}Gt.propTypes={setInputFormat:Ke().func.isRequired,inputFormat:Ke().string.isRequired,id:Ke().string.isRequired,label:Ke().string.isRequired,isDisabled:Ke().bool.isRequired},Gt.defaultProps={};const Vt=Gt;var Zt=[{id:"basic",label:"Basic"},{id:"chordpro",label:"ChordPro"},{id:"ultimateGuitar",label:"Ultimate Guitar"}];function Ut(e){var t=e.setInputFormat,r=e.inputFormat,n=e.disableAll,o=Zt.map((function(e){return Ve.createElement(Vt,{setInputFormat:t,id:e.id,key:e.id,label:e.label,inputFormat:r,isDisabled:n})}));return Ve.createElement("div",{className:"sim-InputFormat"},"Input format:",o)}Ut.propTypes={disableAll:Ke().bool.isRequired,setInputFormat:Ke().func.isRequired,inputFormat:Ke().string.isRequired},Ut.defaultProps={};const $t=Ut;r("rB9j"),r("UxlC");var Kt=r("akyv");r("HiXI"),r("SYor"),r("7ueG"),r("pjDv"),r("+2oP");function Jt(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xt=[];function Qt(e){return Xt.length=0,er(e),Xt.join("\n")}var er=function(e){e.bodyParagraphs.map((function(e){tr(e),Xt.push("")}))},tr=function(e){switch(e.type){case"verse":Xt.push("#v");break;case"chorus":Xt.push("#c")}e.lines.map((function(e){return rr(e)}))},rr=function(e){var t=[nr(e),or(e),ir(e)].filter((function(e){return null!==e})).map((function(e){return e.trimRight()}));Xt.push.apply(Xt,Jt(t))},nr=function(e){return sr(e)?e.items.reduce((function(e,t){return ur(t)&&(e+=t.chords.trim()+" "),e}),""):null},or=function(e){return lr(e)?e.items.reduce((function(e,t){return pr(t)||(e+=" "),ur(t)&&(e+="_"),dr(t)&&(e+=" "),e+=t.lyrics.trim(),mr(t)&&(e+=" "),e}),""):null},ir=function(e){if(!cr(e))return null;var t=e.items[0].value.toLowerCase().replace(/[- 0-9]/g,"");return ar[t]?ar[t]:"#"+t},ar={adlib:"#a",bridge:"#b",chorus:"#c",interlude:"#u",intro:"#i",introduction:"#i",outro:"#o",prechorus:"#p",solo:"#s"},sr=function(e){return e.items.some((function(e){return e instanceof Kt.YN&&e.chords}))},lr=function(e){return e.items.some((function(e){return e instanceof Kt.YN&&e.lyrics}))},cr=function(e){return e.items.some((function(e){return e instanceof Kt.Vp&&e.isRenderable()}))},ur=function(e){return e instanceof Kt.YN&&e.chords.trim().length},pr=function(e){return e.lyrics.length},dr=function(e){return e.lyrics.length-e.lyrics.trimLeft().length>=1},mr=function(e){return e.lyrics.trim().length&&e.lyrics.length-e.lyrics.trimRight().length>=1};function fr(e){var t=e.replace(/\r\n/g,"\n").replace(/\t/g," ").replace(/\[\/?ch]/g,"").replace(/\[\/?tab]/g,"");return Qt((new Kt.ZP.UltimateGuitarParser).parse(t))}var gr=function(e){if("ultimateGuitar"===e)return fr;var t="chordpro"===e?new Kt.ZP.ChordProParser:new Kt.ZP.ChordSheetParser;return function(e){return Qt(t.parse(e))}};const hr=function(e,t){return gr(t)(e)};function yr(e){var t=e.cancelImport,r=e.content,n=e.importFile,o=e.isFromWeb,i=e.isImporting,a=e.setContent,s=e.setInputFormat,l=e.inputFormat,c=e.title;if(!i)return null;var u="",p="";try{u=hr(r,l)}catch(e){p=e.message}return Ve.createElement(Pt,{closeModal:t},Ve.createElement("div",{className:"sim-SongImporterModal_Container","data-testid":"song-importer"},Ve.createElement(St,{cancelImport:t,chordMarkContent:u,content:r,error:p,importFile:n,title:c}),Ve.createElement("div",{className:"sim-TwoColumns_Container"},Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement(_t,{setContent:a})),Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement($t,{inputFormat:l,setInputFormat:s,disableAll:!0===o}))),Ve.createElement("div",{className:"sim-TwoColumns_Container sim-TwoColumns_Container-autoHeight"},Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement(zt,{content:r,setContent:a,isDisabled:o})),Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement("div",{className:"sim-Input_Header"},Ve.createElement(at,{iconName:"arrow_drop_down"}),"ChordMark preview",Ve.createElement(at,{iconName:"arrow_drop_down"})),Ve.createElement("div",{className:"sim-Preview_Container","data-testid":"sim-preview"},p?Ve.createElement(Ht,{inputFormat:l,error:p}):u)))))}yr.propTypes={cancelImport:Ke().func.isRequired,content:Ke().string.isRequired,importFile:Ke().func.isRequired,isFromWeb:Ke().bool.isRequired,isImporting:Ke().bool.isRequired,setContent:Ke().func.isRequired,setInputFormat:Ke().func.isRequired,inputFormat:Ke().string.isRequired,title:Ke().string},yr.defaultProps={};const br=yr,vr=(0,Ue.$j)((function(e){return{content:bt(e),isFromWeb:Et(e),isImporting:Ct(e),inputFormat:vt(e),title:Ot(e)}}),{setContent:function(e,t){return Le(be,{content:e,title:t})},setInputFormat:function(e){return Le(ve,{inputFormat:e})},cancelImport:function(){return Le(he)},importFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new TypeError("Cannot import a file without title");var r={id:(0,ht.Z)(),title:e,content:t};return Le(f,r)}})(br),Or=[{id:"edit",label:"Edit",icon:"create",editorMode:"edit"},{id:"play",label:"Screen view",icon:"music_note",editorMode:"play"},{id:"print",label:"Print Preview",icon:"print",editorMode:"print"},{id:"export",label:"Export Preview",icon:"save_alt",editorMode:"export"}];function Cr(e){var t=e.editorMode,r=e.isLeftBarCollapsed,n=e.isRightBarCollapsed,o=e.toggleLeftBar,i=e.toggleRightBar,a=e.setEditorMode,s=e.selectedId,l=e.leftBar,c=e.rightBar,u=["leftBar"];r&&u.push("leftBar-isCollapsed");var p=["rightBar"];return n&&p.push("rightBar-isCollapsed"),Ve.createElement("div",{className:"appLayout-wrapper"},Ve.createElement(vr,null),Ve.createElement("section",{className:u.join(" ")},Ve.createElement("div",{className:"leftBar-content",onClick:r?o:null},Ve.createElement(lt,null),l),Ve.createElement("div",{className:"leftBar-collapser",onClick:o,"data-testid":"leftBar-collapser"},Ve.createElement("span",{className:"leftBar-collapserIcon"},Ve.createElement(at,{iconName:"keyboard_arrow_left"})))),Ve.createElement("section",{className:"appLayout-main"},Ve.createElement("section",{className:"appLayout-header"},Ve.createElement(mt,{allEntries:Or,currentMode:t,setEditorMode:a,selectedId:s})),Ve.createElement("section",{className:"appLayout-content"},e.children),Ve.createElement("section",{className:"appLayout-footer"},Ve.createElement(gt,null))),Ve.createElement("section",{className:p.join(" ")},Ve.createElement("div",{className:"rightBar-collapser",onClick:i,"data-testid":"rightBar-collapser"},Ve.createElement("span",{className:"rightBar-collapserIcon"},Ve.createElement(at,{iconName:"keyboard_arrow_right"}))),Ve.createElement("div",{className:"rightBar-content",onClick:n?i:null},c)))}Cr.propTypes={children:Ke().element,isLeftBarCollapsed:Ke().bool,isRightBarCollapsed:Ke().bool,selectedId:Ke().string,toggleLeftBar:Ke().func.isRequired,toggleRightBar:Ke().func.isRequired,editorMode:Ke().string.isRequired,setEditorMode:Ke().func.isRequired,leftBar:Ke().element.isRequired,rightBar:Ke().element.isRequired},Cr.defaultProps={isLeftBarCollapsed:!1,isRightBarCollapsed:!1};const Er=Cr,wr=(0,Ue.$j)((function(e){return{editorMode:E(e),isLeftBarCollapsed:O(e),isRightBarCollapsed:C(e),selectedId:w(e)}}),{toggleLeftBar:function(){return Le(b)},toggleRightBar:function(){return Le(v)},setEditorMode:ot})(Er);r("ma9I");var Pr=r("Iab2"),Rr=(r("EnZy"),r("XHOe")),jr=r("1C0g"),Fr=r.n(jr);function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Tr(e,t,r,"html")}function Tr(e,t,r,n){if(r&&"chordmarkSrc"===t.chartFormat)return"html"===n?xr(e):e;if(r&&"chordpro"===t.chartFormat){t.customRenderer=Fr();var o=kr(e,t);return"html"===n?xr(o):o}var i=kr(e,t);return"html"===n?i:i.split("\n").map((function(e){return Ee(e)})).map((function(e){return"&nbsp;"===e?"":e})).join("\n")}function kr(e,t){try{var r=(0,Rr.parseSong)(e);return(0,Rr.renderSong)(r,Nr(Nr({},t),{},{printChordsDuration:"uneven",chordsAndLyricsDisplay:t.chartType}))}catch(e){return e.message}}function xr(e){return e.split("\n").map((function(e){return""===e?"&nbsp;":e})).map((function(e){return"<p>".concat(e,"</p>")})).join("\n")}function Ar(){var e=Be().getState(),t=w(e),r=D(e,t),n={transposeValue:te(e,"songPreferences","transposeValue"),harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","accidentalsType"),chartType:te(e,"songFormatting","chartType"),chartFormat:te(e,"songFormatting","chartFormat"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords")},o=function(e){return Tr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]&&arguments[2],"text")}(r.content,n,!0),i="chordpro"===n.chartFormat?"cho":"txt",a="".concat(r.title,".").concat(i),s=new Blob([o],{type:"text/plain;charset=utf-8",endings:"native"});(0,Pr.saveAs)(s,a)}function Mr(e){var t=e.icon,r=e.text,n=e.action;return Ve.createElement("span",{className:"fileManagerAction",onClick:n},Ve.createElement("span",{className:"fileManagerAction-icon"},Ve.createElement(at,{iconName:t})," ",r))}Mr.propTypes={icon:Ke().string.isRequired,text:Ke().string.isRequired,action:Ke().func.isRequired};const Br=Ve.memo(Mr);function Lr(){return Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}function _r(e){var t=e.createFile,r=e.deleteFile,n=e.enableRename,o=[{icon:"upload",text:"Import",action:e.startImport},{icon:"add_circle",text:"New",action:t},{icon:"create",text:"Rename",action:n},{icon:"delete",text:"Delete",action:r},{icon:"download",text:"Export",action:e.exportAsText},{icon:"print",text:"Print",action:e.printFile}];return Ve.createElement("div",{className:"fileManager-actionsList"},o.map((function(e,t){return Ve.createElement(Br,Lr({},e,{key:t}))})))}_r.propTypes={createFile:Ke().func.isRequired,deleteFile:Ke().func.isRequired,enableRename:Ke().func.isRequired,exportAsText:Ke().func.isRequired,printFile:Ke().func.isRequired,startImport:Ke().func.isRequired};const Dr=Ve.memo(_r);function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hr(e){var t=zr((0,Ve.useState)(e.title),2),r=t[0],n=t[1],o=e.fileId,i=e.isSelected,a=e.isRenamed,s=e.defaultTitle,l=e.selectFile,c=e.enableRename,u=e.updateFile,p=["fileManagerEntry"];i&&p.push("fileManagerEntry-isSelected"),a&&p.push("fileManagerEntry-isRenamed");var d=Ve.createRef();function m(e){u(o,{title:e=e||s}),n(e),d.current.scrollLeft=0}return(0,Ve.useEffect)((function(){a&&d.current.focus()}),[a,d]),Ve.createElement("li",{className:p.join(" "),onClick:function(){i||l(o)},onDoubleClick:function(e){a||(c(o),e.target.select())}},Ve.createElement("input",{className:"fileManagerEntry-input",ref:d,type:"text",value:r,readOnly:a?null:"readOnly",autoFocus:a?"autoFocus":null,onChange:function(e){n(e.target.value)},onBlur:function(e){a&&m(e.target.value)},onFocus:function(e){a&&e.target.select()},onKeyPress:function(e){a&&13===e.which&&(e.preventDefault(),window.getSelection().removeAllRanges(),m(e.target.value))}}))}Hr.propTypes={title:Ke().string.isRequired,fileId:Ke().string.isRequired,isSelected:Ke().bool.isRequired,isRenamed:Ke().bool.isRequired,defaultTitle:Ke().string.isRequired,selectFile:Ke().func.isRequired,enableRename:Ke().func.isRequired,updateFile:Ke().func.isRequired};const Gr=Hr;function Vr(e){var t=e.allTitles,r=e.selected,n=e.renamed,o=e.defaultTitle,i=e.createFile,a=e.deleteFile,s=e.enableRename,l=e.startImport,c=e.selectFile,u=e.updateFile,p=e.setEditorMode;return Ve.createElement("div",{className:"fileManager"},Ve.createElement("div",{className:"fileManager-isCollapsed"},Ve.createElement("span",{className:"fileManager-icon"},Ve.createElement(at,{iconName:"file_copy"}))),Ve.createElement("div",{className:"fileManager-isExpanded"},Ve.createElement(Dr,{createFile:function(){return i(o)},deleteFile:function(){return a(r)},enableRename:function(){return s(r)},startImport:function(){return l()},exportAsText:function(){p("export"),Ar()},printFile:function(){p("print"),setTimeout((function(){return window.print()}),0)}}),Ve.createElement("ul",{className:"fileManager-entriesList"},t.map((function(e){return Ve.createElement(Gr,{title:e.title,defaultTitle:o,fileId:e.id,isSelected:r===e.id,isRenamed:n===e.id,selectFile:c,updateFile:u,enableRename:s,key:e.id})})))))}Vr.propTypes={allTitles:Ke().arrayOf(Ke().shape({title:Ke().string.isRequired,id:Ke().string.isRequired})).isRequired,selected:Ke().string.isRequired,renamed:Ke().string.isRequired,defaultTitle:Ke().string.isRequired,selectFile:Ke().func.isRequired,createFile:Ke().func.isRequired,deleteFile:Ke().func.isRequired,enableRename:Ke().func.isRequired,startImport:Ke().func.isRequired,updateFile:Ke().func.isRequired,setEditorMode:Ke().func.isRequired};const Zr=Vr,Ur=(0,Ue.$j)((function(e){return{selected:w(e),renamed:P(e),defaultTitle:R(e),allTitles:_(e)}}),{selectFile:function(e){return Le(Q,{id:e})},createFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new TypeError("Cannot create a file without title");var r={id:(0,ht.Z)(),title:e,content:t};return Le(d,r)},deleteFile:function(e){return Le(m,{id:e})},updateFile:yt,enableRename:function(e){return Le(ee,{id:e})},setEditorMode:ot,startImport:function(){return Le(ye,{isFromWeb:!1})}})(Zr);function $r(e){return Ce().sanitize(e)}function Kr(e){var t=e.content,r=e.useChartFormat,n=Ir(t,u()(e,["transposeValue","harmonizeAccidentals","accidentalsType","chartType","chartFormat","alignChordsWithLyrics","alignBars","autoRepeatChords"]),r);return Ve.createElement("div",{className:"songRenderer"},Ve.createElement("div",{dangerouslySetInnerHTML:{__html:$r(n)}}))}Kr.propTypes={useChartFormat:Ke().bool.isRequired,chartFormat:Ke().string.isRequired,content:Ke().string},Kr.defaultProps={content:"",useChartFormat:!1};const Jr=Kr,Yr=(0,Ue.$j)((function(e){return{transposeValue:te(e,"songPreferences","transposeValue"),harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","preferredAccidentals"),chartFormat:te(e,"songFormatting","chartFormat"),chartType:te(e,"songFormatting","chartType"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords")}}))(Jr);function Xr(e){var t=e.selectedFile;return Ve.createElement("div",{className:["editorPreview"].join(" ")},Ve.createElement(Yr,{content:t.content}))}Xr.propTypes={selectedFile:Ke().object.isRequired};const Qr=Xr,en=(0,Ue.$j)((function(){return{}}))(Qr);var tn=r("UxO+"),rn=r("V2qZ"),nn=r("BUsU"),on=r("SxI5"),an=r("ABBN"),sn=r("lGMC");var ln=r("IhAg");const cn=new nn.V_({nodes:ln.td,marks:ln.EI});r("vxnP");function un(e){return e.toJSON().doc.content.map((function(e){return e.content?e.content.reduce((function(e,t){return e+=t.text}),""):""})).join("\n")}function pn(e){return Ce().sanitize(e,{ALLOWED_TAGS:["p","#text"],KEEP_CONTENT:!1})}function dn(e){var t,r,n=e.selectedFileId,o=e.editorContent,i=e.updateFile,a=(0,Ve.useRef)(),s=(0,Ve.useRef)(),l=(t=n,r=(0,Ve.useRef)(),(0,Ve.useEffect)((function(){r.current=t})),r.current);function c(){return a.current&&a.current.dom.parentNode}function u(){a.current.dom.parentNode.removeChild(a.current.dom)}return(0,Ve.useEffect)((function(){if(!n||a.current&&l===n)c()&&!n&&u();else{c()&&u();var e=function(e){return tn.yy.create({doc:nn.aw.fromSchema(cn).parse((t=e,r=pn(t).split("\n").map((function(e){return"<p>".concat(e,"</p>")})).join(""),n=document.createElement("div"),n.innerHTML=pn(r),n),{preserveWhitespace:"full"}),plugins:[(0,sn.m8)(),(0,on.h)({"Mod-z":sn.Yw,"Mod-y":sn.KX}),(0,on.h)(an.YR)]});var t,r,n}(o);a.current=function(e,t,r){return new rn.tk(null,{state:e,dispatchTransaction:function(e){var n=this.state.applyTransaction(e),o=n.state,i=n.transactions;this.updateState(o),i.some((function(e){return e.docChanged}))&&t(r,{content:un(o)})}})}(e,i,n),s.current.appendChild(a.current.dom),dn.editorView=a.current}})),Ve.createElement("div",{className:"prosemirrorWrapper",ref:s})}dn.defaultProps={selectedFileId:"",editorContent:""},dn.propTypes={selectedFileId:Ke().string,editorContent:Ke().string,updateFile:Ke().func.isRequired};const mn=dn;function fn(e){var t=e.selectedFile,r=e.updateFile;return Ve.createElement("div",{className:"songEditor"},Ve.createElement("div",{className:"songEditor-source"},Ve.createElement(mn,{editorContent:t.content,updateFile:r,selectedFileId:t.id})),Ve.createElement("div",{className:"songEditor-preview"},Ve.createElement(en,{selectedFile:t})))}fn.propTypes={selectedFile:Ke().object,updateFile:Ke().func.isRequired};const gn=fn;function hn(e){var t=e.selectedFile;return Ve.createElement("div",{className:"exportPreview exp-SongRenderer"},Ve.createElement(Yr,{content:t.content,useChartFormat:!0}))}hn.propTypes={selectedFile:Ke().object.isRequired};const yn=hn;function bn(e){var t=e.selectedFile,r=e.fontSize,n=e.chordsColor,o=e.highlightChords,i=e.columnsCount,a=["playRenderer"];return a.push("playRenderer--columns-"+i),a.push("cmLine--fontSize"+r),a.push("cmChordSymbol--chordsColor-"+n),o&&a.push("cmChordLine--highlightChords"),Ve.createElement("div",{className:"playRendererWrapper1"},Ve.createElement("div",{className:"playRendererWrapper2"},Ve.createElement("div",{className:a.join(" "),"data-testid":"playRenderer"},Ve.createElement(Yr,{content:t.content}))))}bn.propTypes={selectedFile:Ke().object.isRequired,columnsCount:Ke().number.isRequired,fontSize:Ke().number.isRequired,chordsColor:Ke().string.isRequired,highlightChords:Ke().bool.isRequired};const vn=bn,On=(0,Ue.$j)((function(e){return{chordsColor:te(e,"songFormatting","chordsColor"),highlightChords:te(e,"songFormatting","highlightChords"),fontSize:te(e,"songFormatting","fontSize"),columnsCount:te(e,"songFormatting","columnsCount")}}))(vn);r("ls82");function Cn(e){var t=e.pageHeader,r=e.allColumnsLines,n=e.documentSize,o=e.documentMargins,i=e.fontSize,a=r.map((function(e,t){var r=e.join("\n");return Ve.createElement("div",{key:t,className:"printPreview-pageColumn","data-testid":"printPreview-pageColumn",dangerouslySetInnerHTML:{__html:$r(r)}})})),s=["printPreview-page"];s.push("printPreview-page--"+n),s.push("printPreview-page--font"+i);var l=["printPreview-pageContentWrapper"];return l.push("printPreview-pageContentWrapper--padding"+o),Ve.createElement("div",{className:s.join(" "),"data-testid":"printPreview-page"},Ve.createElement("div",{className:l.join(" "),"data-testid":"printPreview-pageContentWrapper"},Ve.createElement("div",{className:"printPreview-pageContent"},t,Ve.createElement("div",{className:"printPreview-pageColumnWrapper"},a))))}Cn.defaultProps={allColumnsLines:[]},Cn.propTypes={pageHeader:Ke().element,allColumnsLines:Ke().arrayOf(Ke().arrayOf(Ke().string)),documentSize:Ke().string.isRequired,documentMargins:Ke().number.isRequired,fontSize:Ke().number.isRequired};const En=Ve.memo(Cn);function wn(e){var t=e.title;return Ve.createElement("div",{className:"printPreview-pageHeader"},t)}wn.defaultProps={allColumnsLines:[]},wn.propTypes={title:Ke().string.isRequired};const Pn=Ve.memo(wn);var Rn="cmEmptyLine",jn="cmChordLine",Fn="cmTextLine";function Sn(e,t){var r=t.columnsCount,n=t.firstPageHeight,o=t.normalPageHeight,i=t.columnBreakOnParagraph,a=t.noEmptyLinesOnColumnStart,s=void 0===a||a,l=t.noOrphanTextLine,c=void 0===l||l,u=function(e){var t=e.firstPageHeight,r=e.normalPageHeight,n=e.columnsCount,o=[],i=0,a=0,s=u(),l=0;function c(e){e.forEach((function(e){p(l+e.height)&&d(),o[i][a].push(e.content),l+=e.height}))}function u(){return 0===i&&t?t:r}function p(e){return e>s}function d(){m()?(i++,o[i]=[],a=0):a++,o[i][a]=[],l=0,s=u()}function m(){return a===n-1}return o[i]=[],o[i][a]=[],{insert:function(e){c(e)},insertOnNextColumn:function(e){d(),c(e)},fitsOnCurrentColumn:function(e){return l+e<=s},fitsOnNextColumn:function(e){return e<=(0===i&&a<n&&t?t:r)},get:function(){return o}}}({columnsCount:r,firstPageHeight:n,normalPageHeight:o,noEmptyLinesOnColumnStart:s}),p=[],d=0;return(n||o)>0&&e.forEach((function(t,r){(function(e,t,r,n){return!(Nn(t)&&!e.fitsOnCurrentColumn(t.height)&&0===r.length&&!0===n)})(u,t,p,s)&&(p.push(t),d+=t.height),p.length>0&&function(e,t,r){var n=r.noOrphanTextLine,o=r.columnBreakOnParagraph;if(Nn(e)||!t)return!0;var i=function(e){return qn(e.content,jn)}(e)&&function(e){return qn(e.content,Fn)}(t);if(!0===n&&i)return!1;var a=Nn(t);if(!0===o&&!a)return!1;return!0}(t,e[r+1],{noOrphanTextLine:c,columnBreakOnParagraph:i})&&(u.fitsOnCurrentColumn(d)?u.insert(p):u.fitsOnNextColumn(d)?u.insertOnNextColumn(p):u.insert(p),p=[],d=0)})),u.get()}function Nn(e){return qn(e.content,Rn)}function qn(e,t){return e.indexOf(t)>-1}function In(e,t){var r=document.createElement("div");return r.classList.add("measuring-node"),document.body.appendChild(r),new Promise((function(n){Ze.render(Ve.createElement("div",null,e),r,(function(){var e=t(r);Ze.unmountComponentAtNode(r),r.parentNode.removeChild(r),n(e)}))}))}function Tn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.length||0;r<e;r++)t.push([]);return t}function kn(e){return e.offsetHeight}function xn(e){return e.clientHeight}function An(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Mn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){An(i,n,o,a,s,"next",e)}function s(e){An(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Bn=".cmLine";function Ln(e,t){return _n.apply(this,arguments)}function _n(){return _n=Mn(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.columnsCount,o=r.documentSize,i=r.documentMargins,a=r.fontSize,s=Ve.createElement("div",{className:"printPreview"},Ve.createElement(En,{allColumnsLines:Tn(n,[t]),columnsCount:n,documentSize:o,documentMargins:i,fontSize:a})),l=function(e){var t=[];return e.querySelectorAll(Bn).forEach((function(e){t.push(kn(e))})),t},e.next=5,In(s,l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function Dn(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function zn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Dn(i,n,o,a,s,"next",e)}function s(e){Dn(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Wn(e,t){return Hn.apply(this,arguments)}function Hn(){return(Hn=zn(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.columnsCount,o=r.documentSize,i=r.documentMargins,a=r.fontSize,s=Ve.createElement(En,{pageHeader:Ve.createElement(Pn,{title:t}),allColumnsLines:Tn(n),documentSize:o,documentMargins:i,fontSize:a}),l=function(e){var t=e.querySelector(".printPreview-pageContent");return{firstPageHeight:xn(e.querySelector(".printPreview-pageColumnWrapper")),normalPageHeight:xn(t)}},e.next=5,In(s,l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Un(e){var t=Vn((0,Ve.useState)([]),2),r=t[0],n=t[1],o=e.title,i=e.allLines,a=e.columnsCount,s=e.columnBreakOnParagraph,l=e.documentSize,c=e.documentMargins,u=e.fontSize;(0,Ve.useLayoutEffect)((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,p,d,m,f,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={columnsCount:a,documentSize:l,documentMargins:c,fontSize:u},e.next=3,Ln(i,t);case 3:return r=e.sent,e.next=6,Wn(o,t);case 6:p=e.sent,d=p.normalPageHeight,m=p.firstPageHeight,f=i.map((function(e,t){return{content:e,height:r[t]}})),g=Sn(f,{columnsCount:a,columnBreakOnParagraph:s,normalPageHeight:d,firstPageHeight:m}),n(g);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Gn(i,n,o,a,s,"next",e)}function s(e){Gn(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[i,o,a,s,l,c,u]);var p=r.map((function(e,t){return Ve.createElement(En,{key:t,pageHeader:0===t?Ve.createElement(Pn,{title:o}):null,allColumnsLines:Tn(a,e),documentSize:l,documentMargins:c,fontSize:u})}));return Ve.createElement(Ve.Fragment,null,p)}Un.propTypes={title:Ke().string.isRequired,allLines:Ke().arrayOf(Ke().string).isRequired,columnsCount:Ke().number.isRequired,columnBreakOnParagraph:Ke().bool.isRequired,documentSize:Ke().string.isRequired,documentMargins:Ke().number.isRequired,fontSize:Ke().number.isRequired};const $n=Un;function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yn(e){var t=e.selectedFile,r=e.highlightChords,n=u()(e,["transposeValue","harmonizeAccidentals","accidentalsType","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords"]),o=Ir(t.content||"",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(r),!0).forEach((function(t){Jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n)).split("\n"),i=["printPreview"];return r&&i.push("cmChordLine--highlightChords"),Ve.createElement("div",{className:i.join(" "),"data-testid":"printPreview"},Ve.createElement($n,{title:t.title||"",allLines:o,columnsCount:e.columnsCount,columnBreakOnParagraph:e.columnBreakOnParagraph,documentSize:e.documentSize||"a4",documentMargins:e.documentMargins,fontSize:e.fontSize}))}Yn.propTypes={chartType:Ke().string.isRequired,selectedFile:Ke().object.isRequired,columnsCount:Ke().number.isRequired,columnBreakOnParagraph:Ke().bool.isRequired,documentSize:Ke().string,documentMargins:Ke().number.isRequired,fontSize:Ke().number.isRequired,highlightChords:Ke().bool.isRequired};const Xn=Yn,Qn=(0,Ue.$j)((function(e){return{harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","preferredAccidentals"),transposeValue:te(e,"songPreferences","transposeValue"),chartType:te(e,"songFormatting","chartType"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords"),columnsCount:te(e,"songFormatting","columnsCount"),columnBreakOnParagraph:te(e,"songFormatting","columnBreakOnParagraph"),documentMargins:te(e,"songFormatting","documentMargins"),fontSize:te(e,"songFormatting","fontSize"),highlightChords:te(e,"songFormatting","highlightChords")}}))(Xn);function eo(e){switch(e.editorMode){case"edit":return Ve.createElement(gn,e);case"play":return Ve.createElement(On,e);case"print":return Ve.createElement(Qn,e);case"export":return Ve.createElement(yn,e)}}eo.propTypes={editorMode:Ke().string.isRequired};const to=eo,ro=(0,Ue.$j)((function(e){return{selectedFile:D(e,w(e))||{},editorMode:E(e)}}),{updateFile:yt})(to);r("JTJg");function no(){return no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},no.apply(this,arguments)}function oo(e){var t,r,n,o,i,a,s,l=e.id,c=e.allWidgets,u=e.nonInteractableWidgets,p=e.hiddenWidgets,d=e.setOption,m=e.getEntryComponent,f=["optionsPanel","optionsPanel-"+l],g=c.widgetsOrder.filter((function(e){return!p.includes(e)})).map((function(e){return"optionsGroup"===(t=c.allWidgets[e]).type?(s=t.groupWidgetsOrder.filter((function(e){return!p.includes(e)})).map((function(n){return r=t.allGroupWidgets[n],a=!u.includes(e)&&!u.includes(n),h(n,r,a)})),o=m(t.type),i=!u.includes(e),Ve.createElement(o,{key:e,isInteractable:i,label:t.label,icon:t.icon},s)):h(e,t,!u.includes(e))}));function h(t,r,o){return n=m(r.type),Ve.createElement(n,no({key:t,isInteractable:o,optionContext:r.option.context,optionKey:r.option.key,optionValue:e[r.option.key],setOption:d,label:r.label},r.typeOptions))}return Ve.createElement("div",{className:f.join(" ")},g)}oo.propTypes={id:Ke().string.isRequired,allWidgets:Ke().object.isRequired,nonInteractableWidgets:Ke().arrayOf(Ke().string).isRequired,hiddenWidgets:Ke().arrayOf(Ke().string).isRequired,setOption:Ke().func.isRequired,getEntryComponent:Ke().func.isRequired};const io=oo;function ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return so(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lo(e){var t=ao((0,Ve.useState)(e.isOpened),2),r=t[0],n=t[1],o=e.isInteractable,i=e.icon,a=e.label,s=["sb-optionsGroup"];function l(){return o&&e.children&&e.children.length>0}return l()||s.push("sb-optionsGroup-isNotInteractable"),!r||e.children&&0!==e.children.length||n(!1),Ve.createElement("div",{className:s.join(" ")},Ve.createElement("div",{className:"sb-optionsGroup-title",onClick:l()?function(){n(!r)}:null},Ve.createElement("div",{className:"sb-optionsGroup-label"},Ve.createElement("span",{className:"sb-optionsGroup-iconTitle"},Ve.createElement(at,{iconName:i}))," ",a),Ve.createElement("div",{className:"sb-optionsGroup-toggle"},Ve.createElement("span",{className:"sb-optionsGroup-iconToggle"},Ve.createElement(at,{iconName:r?"unfold_less":"unfold_more"})))),Ve.createElement("div",{className:"sb-optionsGroup-content"},r&&e.children))}lo.propTypes={isOpened:Ke().bool,isInteractable:Ke().bool.isRequired,icon:Ke().string.isRequired,label:Ke().string.isRequired,children:Ke().arrayOf(Ke().element)},lo.defaultProps={isOpened:!0};const co=lo;r("fbCW");function uo(e){var t,r=e.isSelected,n=e.isInteractable,o=e.label,i=e.onClick,a=["sb-optionSelectChoice"];return r&&(a.push("sb-optionSelectChoice-isSelected"),t=Ve.createElement("span",{className:"sb-optionSelectChoice-checkIcon"},Ve.createElement(at,{iconName:"check"}))),n||a.push("sb-optionSelectChoice-isNotInteractable"),Ve.createElement("div",{className:a.join(" "),onClick:function(){n&&i()}},Ve.createElement("div",{className:"sb-optionSelectChoice-check"},r&&t),Ve.createElement("div",{className:"sb-optionSelectChoice-label"},o))}uo.propTypes={isSelected:Ke().bool.isRequired,isInteractable:Ke().bool.isRequired,label:Ke().string.isRequired,onClick:Ke().func.isRequired};const po=Ve.memo(uo);function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function go(e){var t=mo((0,Ve.useState)(!1),2),r=t[0],n=t[1],o=e.isInteractable,i=e.label,a=e.allChoices,s=e.optionContext,l=e.optionKey,c=e.optionValue,u=e.setOption,p=["sb-optionSelect"];o||p.push("sb-optionSelect-isNotInteractable");var d=r?"keyboard_arrow_down":"keyboard_arrow_right";var m=r?Ve.createElement("div",{className:"sb-optionSelect-choices"},a.map((function(e){return Ve.createElement(po,{key:e.value,label:e.label,isSelected:c===e.value,isInteractable:o,onClick:function(){u(s,l,e.value)}})}))):null,f=a.find((function(e){return c===e.value})).label,g=r?i:Ve.createElement("span",null,Ve.createElement("span",null,i+": "),Ve.createElement("span",{className:"sb-optionSelectChoice-activeLabel"},f));return Ve.createElement("div",{className:p.join(" ")},Ve.createElement("div",{className:"sb-optionSelect-title",onClick:o?function(){n(!r)}:null},Ve.createElement("div",{className:"sb-optionSelect-desc","data-testid":"selectLabel"},g),Ve.createElement("div",{className:"sb-optionSelect-toggle"},Ve.createElement("span",{className:"sb-optionSelect-icon"},Ve.createElement(at,{iconName:d})))),m)}go.propTypes={isInteractable:Ke().bool.isRequired,label:Ke().string.isRequired,allChoices:Ke().array.isRequired,optionContext:Ke().string.isRequired,optionKey:Ke().string.isRequired,optionValue:Ke().string.isRequired,setOption:Ke().func.isRequired};const ho=go;r("JevA"),r("qePV");function yo(e){var t=e.isInteractable,r=e.label,n=e.min,o=e.max,i=e.showPlusSymbol,a=e.optionContext,s=e.optionKey,l=e.optionValue,c=e.setOption,u=["sb-optionSlider"];t||u.push("sb-optionSlider-isNotInteractable");var p=l>0&&i?"+"+l:l;return Ve.createElement("div",{className:u.join(" ")},Ve.createElement("div",{className:"sb-optionSlider-desc"},r),Ve.createElement("div",{className:"sb-optionSlider-value"},p),Ve.createElement("div",{className:"sb-optionSlider-range"},Ve.createElement("input",{min:n,max:o,value:l,type:"range",onChange:t?function(e){c(a,s,Number.parseInt(e.target.value))}:null,disabled:!t})))}yo.propTypes={isInteractable:Ke().bool.isRequired,label:Ke().string.isRequired,min:Ke().number.isRequired,max:Ke().number.isRequired,showPlusSymbol:Ke().bool,optionContext:Ke().string.isRequired,optionKey:Ke().string.isRequired,optionValue:Ke().number.isRequired,setOption:Ke().func.isRequired},yo.defaultProps={showPlusSymbol:!0};const bo=Ve.memo(yo);function vo(e){var t=e.isInteractable,r=e.label,n=e.optionContext,o=e.optionKey,i=e.optionValue,a=e.setOption,s=["sb-optionToggle"];return s.push(!0===i?"sb-optionToggle-isOn":"sb-optionToggle-isOff"),t||s.push("sb-optionToggle-isNotInteractable"),Ve.createElement("div",{className:s.join(" "),onClick:t?function(){a(n,o,!i)}:null},Ve.createElement("div",{className:"sb-optionToggle-desc"},r),Ve.createElement("div",{className:"sb-optionToggle-icon"},Ve.createElement("span",{className:"sb-optionToggle-icon"},Ve.createElement(at,{iconName:!0===i?"toggle_on":"toggle_off"}))))}vo.propTypes={isInteractable:Ke().bool.isRequired,label:Ke().string.isRequired,optionContext:Ke().string.isRequired,optionKey:Ke().string.isRequired,optionValue:Ke().bool.isRequired,setOption:Ke().func.isRequired};const Oo=Ve.memo(vo);function Co(){return Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Co.apply(this,arguments)}function Eo(e){switch(e){case"optionsGroup":return co;case"select":return ho;case"slider":return bo;case"toggle":return Oo}}function wo(e){return Ve.createElement("div",{className:"sb-optionsPanel"},Ve.createElement(io,Co({},e,{getEntryComponent:Eo})))}function Po(){return Po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Po.apply(this,arguments)}var Ro=function(e,t,r){if(!e)throw new TypeError("Cannot set an option without a context");if(!t)throw new TypeError("Cannot set an option without a key");return Le(h,{context:e,key:t,value:r})};var jo=r("zqxM"),Fo=r.n(jo);function So(e){return function(e){if(Array.isArray(e))return No(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return No(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return No(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(r),!0).forEach((function(t){To(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function To(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ko=function(e,t,r,n){return(0,Ue.$j)((function(n){var o,i,a={allWidgets:e,nonInteractableWidgets:t(n),hiddenWidgets:r(n)};return e.widgetsOrder.forEach((function(t){(o=e.allWidgets[t]).groupWidgetsOrder.forEach((function(e){i=o.allGroupWidgets[e],a[i.option.key]=te(n,i.option.context,i.option.key)}))})),a}),{setOption:Ro})(n)}({widgetsOrder:["key","preferences","layout","style"],allWidgets:{key:{label:"Key",type:"optionsGroup",icon:"music_note",groupWidgetsOrder:["transposeValue","harmonizeAccidentals","preferredAccidentals"],allGroupWidgets:{transposeValue:{label:"Transpose",type:"slider",typeOptions:{min:-11,max:11,showPlusSymbol:!0},option:{context:"songPreferences",key:"transposeValue"}},harmonizeAccidentals:{label:"Harmonize accidentals",type:"toggle",option:{context:"songPreferences",key:"harmonizeAccidentals"}},preferredAccidentals:{label:"Preferred accidentals",type:"select",typeOptions:{allChoices:[{id:"preferredAccidentalsAuto",label:"Auto",value:"auto"},{id:"preferredAccidentalsSharp",label:"",value:"sharp"},{id:"preferredAccidentalsFlat",label:"",value:"flat"}]},option:{context:"songPreferences",key:"preferredAccidentals"}}}},preferences:{label:"Preferences",type:"optionsGroup",icon:"tune",groupWidgetsOrder:["chartFormat","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords"],allGroupWidgets:{chartFormat:{label:"Export format",type:"select",typeOptions:{allChoices:[{id:"formatChordMark",label:"ChordMark",value:"chordmark"},{id:"formatChordMarkSrc",label:"ChordMark (Source)",value:"chordmarkSrc"},{id:"formatChordpro",label:"ChordPro",value:"chordpro"}]},option:{context:"songFormatting",key:"chartFormat"}},chartType:{label:"Chart type",type:"select",typeOptions:{allChoices:[{id:"typedisplayAll",label:"Complete",value:"all"},{id:"typedisplayLyrics",label:"Lyrics only",value:"lyrics"},{id:"typedisplayChords",label:"Chords only",value:"chords"},{id:"typedisplayChordsFirstLyricLine",label:"Chords + First lyric line",value:"chordsFirstLyricLine"}]},option:{context:"songFormatting",key:"chartType"}},alignChordsWithLyrics:{label:"Align chords with lyrics",type:"toggle",option:{context:"songFormatting",key:"alignChordsWithLyrics"}},alignBars:{label:"Align bars",type:"toggle",option:{context:"songFormatting",key:"alignBars"}},autoRepeatChords:{label:"Auto repeat chords",type:"toggle",option:{context:"songFormatting",key:"autoRepeatChords"}}}},layout:{type:"optionsGroup",label:"Layout",icon:"view_compact",groupWidgetsOrder:["columnsCount","columnBreakOnParagraph","documentMargins"],allGroupWidgets:{columnsCount:{label:"Columns",type:"slider",typeOptions:{min:1,max:4},option:{context:"songFormatting",key:"columnsCount"}},columnBreakOnParagraph:{label:"Break on paragraph",type:"toggle",option:{context:"songFormatting",key:"columnBreakOnParagraph"}},documentMargins:{label:"Margins",type:"slider",typeOptions:{min:1,max:5},option:{context:"songFormatting",key:"documentMargins"}}}},style:{type:"optionsGroup",label:"Style",icon:"format_size",groupWidgetsOrder:["fontSize","chordsColor","highlightChords"],allGroupWidgets:{fontSize:{label:"Font size",type:"slider",typeOptions:{min:-5,max:5,showPlusSymbol:!0},option:{context:"songFormatting",key:"fontSize"}},chordsColor:{label:"Chords color",type:"select",typeOptions:{allChoices:[{id:"chordsColor",label:"Base",value:"base"},{id:"chordsColorRed",label:"Red",value:"red"},{id:"chordsColorYellow",label:"Yellow",value:"yellow"},{id:"chordsColorGreen",label:"Green",value:"green"}]},option:{context:"songFormatting",key:"chordsColor"}},highlightChords:{label:"Highlight Chords",type:"toggle",option:{context:"songFormatting",key:"highlightChords"}}}}}},(function(e){var t=[],r=Object.keys(Io(Io({},re(e,"songFormatting")),re(e,"songPreferences")));if(!w(e))return r;var n=E(e),o=Fo()(r,H[n]);t.push.apply(t,So(o));var i=te(e,"songFormatting","chartType");"lyrics"===i?(t.push("alignChordsWithLyrics"),t.push("alignBars"),t.push("autoRepeatChords")):"chords"===i&&t.push("alignChordsWithLyrics");var a=te(e,"songFormatting","chartFormat");return["chordmarkSrc","chordpro"].includes(a)&&(t.push("chartType"),t.push("alignChordsWithLyrics"),t.push("alignBars"),t.push("autoRepeatChords")),t}),(function(e){var t=[];return te(e,"songPreferences","harmonizeAccidentals")||t.push("preferredAccidentals"),t}),(function(e){return Ve.createElement("div",{className:"renderingOptionsPanel"},Ve.createElement("div",{className:"renderingOptionsPanel-isCollapsed"},Ve.createElement("span",{className:"renderingOptionsPanel-icon"},Ve.createElement(at,{iconName:"settings"}))),Ve.createElement("div",{className:"renderingOptionsPanel-isExpanded"},Ve.createElement(wo,Po({},e,{id:"rendering"}))))}));function xo(){var e=Ve.createElement(Ur,null),t=Ve.createElement(ko,null);return Ve.createElement(wr,{leftBar:e,rightBar:t},Ve.createElement(ro,null))}var Ao=[{path:"/editor",action:function(){return xo}}],Mo=new Ge.Z(Ao);const Bo=function(e){return Mo.resolve(e).then((function(e){return t=e,void Ze.render(Ve.createElement(Ue.zt,{store:Be()},Ve.createElement(Ve.StrictMode,null,Ve.createElement(nt,null,Ve.createElement(t,null)))),document.getElementById("app"));var t}))};window.addEventListener("message",He),Me(),Bo("/editor")}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],s=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,s,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var u=l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[a[c]]=0;return n.O(u)},r=self.webpackChunk_touffi_chords_charts_studio=self.webpackChunk_touffi_chords_charts_studio||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[216],(()=>n("8ruZ")));o=n.O(o)})();
//# sourceMappingURL=main.e156a20af8fdf9c5b55d.js.map